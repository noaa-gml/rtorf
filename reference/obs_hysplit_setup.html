<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>obs_hysplit_setup — obs_hysplit_setup • rtorf</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="obs_hysplit_setup — obs_hysplit_setup"><meta name="description" content="This function creates a SETUP.CFG file for HYSPLIT model."><meta property="og:description" content="This function creates a SETUP.CFG file for HYSPLIT model."><meta property="og:image" content="https://noaa-gml.github.io/rtorf/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rtorf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/aircore.html">aircore</a></li>
    <li><a class="dropdown-item" href="../articles/aircraft-flask.html">aircraft-flask</a></li>
    <li><a class="dropdown-item" href="../articles/aircraft-insitu.html">aircraft-insitu</a></li>
    <li><a class="dropdown-item" href="../articles/aircraft-pfp.html">aircraft-pfp</a></li>
    <li><a class="dropdown-item" href="../articles/hysplit.html">hysplit</a></li>
    <li><a class="dropdown-item" href="../articles/shipboard-flask.html">shipboard-flask</a></li>
    <li><a class="dropdown-item" href="../articles/shipoboard-insitu.html">shipboard-insitu</a></li>
    <li><a class="dropdown-item" href="../articles/summary.html">summary</a></li>
    <li><a class="dropdown-item" href="../articles/surface-flask.html">surface-flask</a></li>
    <li><a class="dropdown-item" href="../articles/surface-insitu.html">surface-insitu</a></li>
    <li><a class="dropdown-item" href="../articles/surface-pfp.html">surface-pfp</a></li>
    <li><a class="dropdown-item" href="../articles/tower-insitu.html">tower-insitu</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/noaa-gml/rtorf/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>obs_hysplit_setup</h1>
      <small class="dont-index">Source: <a href="https://github.com/noaa-gml/rtorf/blob/main/R/10_obs_hysplit.R" class="external-link"><code>R/10_obs_hysplit.R</code></a></small>
      <div class="d-none name"><code>obs_hysplit_setup.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates a SETUP.CFG file for HYSPLIT model.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">obs_hysplit_setup</span><span class="op">(</span></span>
<span>  idsp <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  capemin <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  vscales <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>  kbls <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  kblt <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  kmixd <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  initd <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  veght <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  kmix0 <span class="op">=</span> <span class="fl">150</span>,</span>
<span>  numpar <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  maxpar <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  ichem <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  krand <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  varsiwant <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"time"</span>, <span class="st">"indx"</span>, <span class="st">"lati"</span>, <span class="st">"long"</span>, <span class="st">"zagl"</span>, <span class="st">"zsfc"</span>, <span class="st">"foot"</span>, <span class="st">"samt"</span>, <span class="st">"temp"</span>,</span>
<span>    <span class="st">"dswf"</span>, <span class="st">"mlht"</span>, <span class="st">"dens"</span>, <span class="st">"dmas"</span>, <span class="st">"sigw"</span>, <span class="st">"tlgr"</span><span class="op">)</span>,</span>
<span>  ivmax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">varsiwant</span><span class="op">)</span>,</span>
<span>  outdt <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  <span class="va">extra_params</span>,</span>
<span>  <span class="va">bypass_params</span>,</span>
<span>  setup <span class="op">=</span> <span class="st">"SETUP.CFG"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-idsp">idsp<a class="anchor" aria-label="anchor" href="#arg-idsp"></a></dt>
<dd><p>particle dispersion scheme 1:HYSPLIT 2:STILT</p></dd>


<dt id="arg-capemin">capemin<a class="anchor" aria-label="anchor" href="#arg-capemin"></a></dt>
<dd><p>-1 no convection; -2 Grell convection scheme;
-3 extreme convection; &gt;0 enhanced vertical mixing when CAPE exceeds this value (J/kg)</p></dd>


<dt id="arg-vscales">vscales<a class="anchor" aria-label="anchor" href="#arg-vscales"></a></dt>
<dd><p>vertical Lagrangian time scale (sec) for stable PBL</p></dd>


<dt id="arg-kbls">kbls<a class="anchor" aria-label="anchor" href="#arg-kbls"></a></dt>
<dd><p>boundary layer stability derived from 1:fluxes 2:wind_temperature</p></dd>


<dt id="arg-kblt">kblt<a class="anchor" aria-label="anchor" href="#arg-kblt"></a></dt>
<dd><p>boundary layer turbulence parameterizations 1:Beljaars 2:Kanthar
3:TKE 4:Measured 5:Hanna</p></dd>


<dt id="arg-kmixd">kmixd<a class="anchor" aria-label="anchor" href="#arg-kmixd"></a></dt>
<dd><p>mixed layer obtained from 0:input 1:temperature 2:TKE 3:modified Richardson</p></dd>


<dt id="arg-initd">initd<a class="anchor" aria-label="anchor" href="#arg-initd"></a></dt>
<dd><p>initial distribution, particle, puff, or combination</p></dd>


<dt id="arg-veght">veght<a class="anchor" aria-label="anchor" href="#arg-veght"></a></dt>
<dd><p>Height below which particle's time is spent is tallied to
calculate footprint for PARTICLE_STILT.DAT less than or equal to 1.
0: fraction of PBL height; greater than 1.0: heightAGL (m)</p></dd>


<dt id="arg-kmix-">kmix0<a class="anchor" aria-label="anchor" href="#arg-kmix-"></a></dt>
<dd><p>minimum mixing depth</p></dd>


<dt id="arg-numpar">numpar<a class="anchor" aria-label="anchor" href="#arg-numpar"></a></dt>
<dd><p>number of puffs or particles to released per cycle</p></dd>


<dt id="arg-maxpar">maxpar<a class="anchor" aria-label="anchor" href="#arg-maxpar"></a></dt>
<dd><p>maximum number of particles carried in simulation</p></dd>


<dt id="arg-ichem">ichem<a class="anchor" aria-label="anchor" href="#arg-ichem"></a></dt>
<dd><p>chemistry conversion modules 0:none 1:matrix 2:convert 3:dust
4: conc grid equal to met grid, 5: divide output mass by air density (kg/m3)
to sum as mixing ration, 7: transport deposited particles on the ocean surface,
8: stilt mode mixing ratio and varying layer,
9: set concentration layer one to a fraction of the boundary layer,
10: restructure concentration grid into time-varying transfer matrix,
11: enable daughter produyct calculation.</p></dd>


<dt id="arg-krand">krand<a class="anchor" aria-label="anchor" href="#arg-krand"></a></dt>
<dd><p>0 method to calculate random number
0=precompute if NUMPAR greater than 5000 or dynamic if NUMPAR less than or equal to 5000;
1=precalculated; 2=calculated in pardsp;
3=none; 4=random initial seed number and calculated in pardsp;
10=same as 0 with random initial seed for non-dispersion applications;
11=same as 1 with random initial seed for non-dispersion applications;
12=same as 2 with random initial seed for non-dispersion applications;
13=same as 3 with random initial seed for non-dispersion applications</p></dd>


<dt id="arg-varsiwant">varsiwant<a class="anchor" aria-label="anchor" href="#arg-varsiwant"></a></dt>
<dd><p>='TIME','INDX','LONG','LATI','ZAGL','SIGW','TLGR','ZSFC', TEMP',
'SAMT','FOOT','SHTF','DMAS','DENS','RHFR','SPHU','DSWF','WOUT','MLHT','PRES'
variables written to PARTICLE_STILT.DAT.</p>
<p>However, the default in this case is:
c('time','indx', 'lati','long','zagl', 'zsfc','foot','samt', 'temp',
'dswf','mlht','dens','dmas','sigw','tlgr'</p></dd>


<dt id="arg-ivmax">ivmax<a class="anchor" aria-label="anchor" href="#arg-ivmax"></a></dt>
<dd><p>0 number of variables written to PARTICLE_STILT.DAT. Must
equal the number of variables listed for variable VARSIWANT</p></dd>


<dt id="arg-outdt">outdt<a class="anchor" aria-label="anchor" href="#arg-outdt"></a></dt>
<dd><p>Default 15. defines the output frequency in minutes of the endpoint positions
in the PARTICLE.DAT file when the STILT emulation mode is configured.
The default value of 0 results in output each time step while the positive
value gives the output frequency in minutes. A negative value disables output. The
output frequency should be an even multiple of the time step and be evenly
divisible into 60. In STILT emulation mode, the time step is forced to one minute.</p></dd>


<dt id="arg-extra-params">extra_params<a class="anchor" aria-label="anchor" href="#arg-extra-params"></a></dt>
<dd><p>more parameters</p></dd>


<dt id="arg-bypass-params">bypass_params<a class="anchor" aria-label="anchor" href="#arg-bypass-params"></a></dt>
<dd><p>named vector of characters to bypass all other arguments. If this
list is available, only the content of this list will be used to
write SETUP.CFG file and not other arguments.</p></dd>


<dt id="arg-setup">setup<a class="anchor" aria-label="anchor" href="#arg-setup"></a></dt>
<dd><p>Default SETUP.CFG</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A SETUP.CFG file</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The var description comes from hysplit 5.3 manual page 214
 From the hysplit user guide:
STILT mode
The STILT model incorporates the variation of HYSPLIT developed by Lin et al.
(2003 - JGR, VOL. 108, NO. D16, 4493, doi:10.1029/2002JD003161) that can be used to
estimate upwind surface fluxes from atmospheric measurements.
Two changes are introduced; the mass summation is divided by air density
resulting in a mixing ratio output field (ICHEM=6) and the lowest
concentration summation layer (concentration layer top depth) is permitted
to vary with the mixed layer depth (ICHEM=9). The ICHEM=8 switch turns on
both density and varying layer depth. Two text files of particle position
 information (PARTICLE.DAT and PARTICLE_STILT.DAT) at each time step will
 also be created unless the namelist parameter OUTDT defining the output
 interval (min) is changed. PARTICLE_STILT.DAT follows the same format as STILT.
 The footprint output in PARTICLE.DAT represents particles that were below
 50<!-- % of the mixed layer height. The footprint in PARTICLE_STILT.DAT represent -->
  particles that were below a user defined height (VEGHT).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Do not run</span></span></span>
<span class="r-in"><span><span class="co"># default</span></span></span>
<span class="r-in"><span><span class="va">setup_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">obs_hysplit_setup</span><span class="op">(</span>setup <span class="op">=</span> <span class="va">setup_file</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">setup_file</span><span class="op">)</span>,sep <span class="op">=</span>  <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># bypass</span></span></span>
<span class="r-in"><span><span class="va">setup_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">obs_hysplit_setup</span><span class="op">(</span>bypass_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>lala <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, setup <span class="op">=</span> <span class="va">setup_file</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">setup_file</span><span class="op">)</span>,sep <span class="op">=</span>  <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &amp;SETUP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  idsp = 2,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  capemin = 500,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  vscales = -1.0,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  kbls = 1,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  kblt = 5,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  kmixd = 0,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  initd = 0,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  veght = 0.5,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  kmix0 = 150,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  numpar = 500,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  maxpar = 500,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ichem = 8,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  krand = 4,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ivmax = 15,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  varsiwant='time','indx','lati','long','zagl','zsfc','foot','samt','temp','dswf','mlht','dens','dmas','sigw','tlgr',</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  outdt = 15,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> /</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &amp;SETUP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  lala = 1,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> /</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sergio Ibarra-Espinosa.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

